<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ê°•ë‚´ë©´ í¸ì˜ì‹œì„¤ ì§€ë„</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Malgun Gothic', sans-serif; background: #f0f2f5; }
    .container { display: flex; flex-wrap: wrap; height: 100vh; }
    .sidebar { width: 300px; background: #fff; padding: 20px; overflow-y: auto; border-right: 2px solid #ddd; }
    .legend h3, .facility-list h3 { margin-bottom: 10px; font-size: 1.1em; color: #333; border-bottom: 2px solid #2196F3; padding-bottom: 5px; }
    .legend-item, .facility-item { padding: 8px; margin-bottom: 10px; border-radius: 6px; cursor: pointer; transition: 0.2s; }
    .legend-item:hover, .facility-item:hover { background: #e3f2fd; transform: translateX(5px); }
    .legend-item.active { background: #cce4ff; }
    .legend-icon { width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 8px; font-size: 16px; flex-shrink: 0; }
    .facility-name { font-weight: bold; }
    .facility-address { font-size: 0.85em; color: #666; }
    .map-container { flex: 1; min-width: 600px; height: 100%; }
    #map { width: 100%; height: 100%; }
    @media (max-width: 968px) {
        .container { flex-direction: column; }
        .sidebar { width: 100%; border-right: none; border-bottom: 2px solid #ddd; max-height: 250px; }
        .map-container { min-width: 100%; height: calc(100vh - 250px); }
    }
</style>
</head>
<body>
<div class="container">
    <div class="sidebar">
        <div class="legend">
            <h3>ğŸ“ ì‹œì„¤ ë¶„ë¥˜</h3>
            <div class="legend-item" data-category="êµìœ¡ê¸°ê´€">
                <div class="legend-icon" style="background: #4CAF50; color: white;">ğŸ“</div>
                <span>êµìœ¡ê¸°ê´€</span>
            </div>
            <div class="legend-item" data-category="ê³µê³µì‹œì„¤">
                <div class="legend-icon" style="background: #2196F3; color: white;">ğŸ›ï¸</div>
                <span>ê³µê³µì‹œì„¤</span>
            </div>
            <div class="legend-item" data-category="í¸ì˜ì‹œì„¤">
                <div class="legend-icon" style="background: #FF9800; color: white;">ğŸª</div>
                <span>í¸ì˜ì‹œì„¤</span>
            </div>
            <div class="legend-item" data-category="ë¬¸í™”ì‹œì„¤">
                <div class="legend-icon" style="background: #9C27B0; color: white;">ğŸ¨</div>
                <span>ë¬¸í™”ì‹œì„¤</span>
            </div>
        </div>
        <div class="facility-list">
            <h3>ğŸ“‹ ì£¼ìš” ì‹œì„¤ ëª©ë¡</h3>
            <div id="facilityListContainer"></div>
        </div>
    </div>
    <div class="map-container">
        <div id="map"></div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
<script>
const facilities = [
    { name: 'í•œêµ­êµì›ëŒ€í•™êµ', lat: 36.6084, lng: 127.3582, category: 'êµìœ¡ê¸°ê´€', icon:'ğŸ“', color:'#4CAF50', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ íƒœì„±íƒ‘ì—°ë¡œ 250' },
    { name: 'í•œêµ­êµì›ëŒ€ë¶€ì„¤ê³ ë“±í•™êµ', lat: 36.6095, lng: 127.3590, category: 'êµìœ¡ê¸°ê´€', icon:'ğŸ“', color:'#4CAF50', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ íƒœì„±íƒ‘ì—°ë¡œ 250' },
    { name: 'ì¶©ì²­ëŒ€í•™êµ', lat: 36.6199, lng: 127.3684, category: 'êµìœ¡ê¸°ê´€', icon:'ğŸ“', color:'#4CAF50', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ ì›”ê³¡ê¸¸ 38' },
    { name: 'ì›”ê³¡ì´ˆë“±í•™êµ', lat: 36.6190, lng: 127.3675, category: 'êµìœ¡ê¸°ê´€', icon:'ğŸ“', color:'#4CAF50', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ ê°€ë¡œìˆ˜ë¡œ 562' },
    { name: 'ë¯¸í˜¸ì¤‘í•™êµ', lat: 36.6205, lng: 127.3695, category: 'êµìœ¡ê¸°ê´€', icon:'ğŸ“', color:'#4CAF50', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ ê°€ë¡œìˆ˜ë¡œ 602' },
    { name: 'í¥ë•êµ¬ì²­', lat: 36.6280, lng: 127.3780, category: 'ê³µê³µì‹œì„¤', icon:'ğŸ›ï¸', color:'#2196F3', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ ì²­ì£¼ì—­ë¡œ 71' },
    { name: 'ê°•ë‚´ë©´ì‚¬ë¬´ì†Œ', lat: 36.6070, lng: 127.3570, category: 'ê³µê³µì‹œì„¤', icon:'ğŸ›ï¸', color:'#2196F3', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ íƒ‘ì—°ë¦¬' },
    { name: 'ê°•ë‚´íŒŒì¶œì†Œ', lat: 36.6065, lng: 127.3565, category: 'ê³µê³µì‹œì„¤', icon:'ğŸ›ï¸', color:'#2196F3', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ íƒ‘ì—°ë¦¬' },
    { name: 'ê°•ë‚´ìš°ì²´êµ­', lat: 36.6060, lng: 127.3560, category: 'ê³µê³µì‹œì„¤', icon:'ğŸ›ï¸', color:'#2196F3', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ íƒ‘ì—°ë¦¬' },
    { name: 'ê°•ë‚´ë³´ê±´ì§€ì†Œ', lat: 36.6068, lng: 127.3568, category: 'ê³µê³µì‹œì„¤', icon:'ğŸ›ï¸', color:'#2196F3', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ íƒ‘ì—°ë¦¬' },
    { name: 'í•œêµ­ì ì‚¬ë°•ë¬¼ê´€', lat: 36.6320, lng: 127.3820, category: 'ë¬¸í™”ì‹œì„¤', icon:'ğŸ¨', color:'#9C27B0', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ ì²­ì£¼ì—­ë¡œ 213-52' },
    { name: 'ë¡¯ë°ë¦¬ì•„ ê°•ë‚´ì ', lat: 36.6055, lng: 127.3555, category: 'í¸ì˜ì‹œì„¤', icon:'ğŸª', color:'#FF9800', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ íƒ‘ì—°ë¦¬' },
    { name: 'ë†í˜‘ë§ˆíŠ¸ ê°•ë‚´ì ', lat: 36.6050, lng: 127.3550, category: 'í¸ì˜ì‹œì„¤', icon:'ğŸª', color:'#FF9800', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ íƒ‘ì—°ë¦¬' },
    { name: 'íŒŒë¦¬ë°”ê²ŒíŠ¸ ê°•ë‚´ì ', lat: 36.6045, lng: 127.3545, category: 'í¸ì˜ì‹œì„¤', icon:'ğŸª', color:'#FF9800', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ íƒ‘ì—°ë¦¬' },
    { name: 'ë‹¤ì´ì†Œ ê°•ë‚´ì ', lat: 36.6040, lng: 127.3540, category: 'í¸ì˜ì‹œì„¤', icon:'ğŸª', color:'#FF9800', address:'ì¶©ë¶ ì²­ì£¼ì‹œ í¥ë•êµ¬ ê°•ë‚´ë©´ íƒ‘ì—°ë¦¬' }
];

const map = L.map('map').setView([36.614, 127.365], 13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution:'Â© OpenStreetMap', maxZoom:18 }).addTo(map);

const markers = [];
facilities.forEach(fac => {
    const icon = L.divIcon({
        html:`<div style="background:${fac.color}; color:white; width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:20px;">${fac.icon}</div>`,
        className:'',
        iconSize:[40,40],
        iconAnchor:[20,20],
        popupAnchor:[0,-20]
    });
    const marker = L.marker([fac.lat, fac.lng], {icon:icon}).addTo(map)
        .bindPopup(`<b>${fac.name}</b><br>${fac.category}<br>ğŸ“ ${fac.address}`);
    markers.push({marker, fac});
});

function updateFacilityList(category=null){
    const container = document.getElementById('facilityListContainer');
    const filtered = category ? facilities.filter(f=>f.category===category) : facilities;
    container.innerHTML = filtered.map(f=>`
        <div class="facility-item" data-lat="${f.lat}" data-lng="${f.lng}">
            <div class="facility-name">${f.icon} ${f.name}</div>
            <div class="facility-address">${f.address}</div>
        </div>
    `).join('');
    document.querySelectorAll('.facility-item').forEach(item=>{
        item.addEventListener('click', function(){
            const lat=parseFloat(this.dataset.lat);
            const lng=parseFloat(this.dataset.lng);
            map.setView([lat,lng],16);
            markers.forEach(({marker,fac})=>{
                if(fac.lat===lat && fac.lng===lng) marker.openPopup();
            });
        });
    });
}

document.querySelectorAll('.legend-item').forEach(item=>{
    item.addEventListener('click', function(){
        const category = this.dataset.category;
        const isActive = this.classList.contains('active');
        document.querySelectorAll('.legend-item').forEach(i=>i.classList.remove('active'));
        if(!isActive){
            this.classList.add('active');
            updateFacilityList(category);
            const bounds = L.latLngBounds(facilities.filter(f=>f.category===category).map(f=>[f.lat,f.lng]));
            map.fitBounds(bounds,{padding:[50,50]});
        } else {
            updateFacilityList();
            map.setView([36.614,127.365],13);
        }
    });
});

updateFacilityList();
</script>
</body>
</html>